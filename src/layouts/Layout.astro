---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import MaxWidth from '../components/MaxWidth.astro';
import HorizontalPadding from '../components/HorizontalPadding.astro';

import '../styles/reset.css';
import '../styles/global.css';

export interface Props {
  title?: string;
}
const { title = 'Portfolio' } = Astro.props as Props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700&family=Patua+One&display=swap"
      rel="stylesheet"
    />

    <title>{title}</title>
  </head>
  <body>
    <MaxWidth>
      <HorizontalPadding>
        <Header />
        <main>
          <slot />
        </main>
        <Footer />
      </HorizontalPadding>
    </MaxWidth>

    <script type="module">
      // import 'https://rawcdn.githack.com/flackr/scroll-timeline/3063e156535f3ab1ffc8a4000ffdd3290232c121/dist/scroll-timeline.js';
      import '/public/js/scroll.js'

      const subskillCircleElement = document.getElementById('subfrontend-circle');
      const skills = document.getElementById('skills');

      const scrollTimeline = new ScrollTimeline({
        source: document.scrollingElement,
        orientation: 'block',
        scrollOffsets: [CSS.px(0), CSS.px(skills.getBoundingClientRect().y + window.scrollY)]
      });

      const scrollTimeline2 = new ScrollTimeline({
        source: document.scrollingElement,
        orientation: 'block',
        scrollOffsets: [
          CSS.px(subskillCircleElement.offsetHeight),
          CSS.px(skills.getBoundingClientRect().y + window.scrollY + subskillCircleElement.offsetHeight)
        ]
      });

      const scrollTimeline3 = new ScrollTimeline({
        source: document.scrollingElement,
        orientation: 'block',
        scrollOffsets: [
          CSS.px(subskillCircleElement.offsetHeight * 2),
          CSS.px(skills.getBoundingClientRect().y + window.scrollY + subskillCircleElement.offsetHeight * 2)
        ]
      });

      document.getElementById('subfrontend-circle').animate(
        { transform: ['translateX(0)', `translateX(-${subskillCircleElement.offsetWidth / 2 + 60}px)`] },
        {
          duration: 1,
          fill: 'both',
          timeline: scrollTimeline
        }
      );

      document.getElementById('frontend-circle').animate(
        { transform: ['translateX(0)', `translateX(${subskillCircleElement.offsetWidth / 2 + 60}px)`] },
        {
          duration: 1,
          fill: 'both',
          timeline: scrollTimeline
        }
      );

      document.getElementById('subbackend-circle').animate(
        { transform: ['translateX(0)', `translateX(-${subskillCircleElement.offsetWidth / 2 + 60}px)`] },
        {
          duration: 1,
          fill: 'both',
          timeline: scrollTimeline2
        }
      );

      document.getElementById('backend-circle').animate(
        { transform: ['translateX(0)', `translateX(${subskillCircleElement.offsetWidth / 2 + 60}px)`] },
        {
          duration: 1,
          fill: 'both',
          timeline: scrollTimeline2
        }
      );

      document.getElementById('subdevops-circle').animate(
        { transform: ['translateX(0)', `translateX(-${subskillCircleElement.offsetWidth / 2 + 60}px)`] },
        {
          duration: 1,
          fill: 'both',
          timeline: scrollTimeline3
        }
      );

      document.getElementById('devops-circle').animate(
        { transform: ['translateX(0)', `translateX(${subskillCircleElement.offsetWidth / 2 + 60}px)`] },
        {
          duration: 1,
          fill: 'both',
          timeline: scrollTimeline3
        }
      );
    </script>
  </body>
</html>
